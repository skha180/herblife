{% extends 'base.html' %}
{% block title %}Products — HerbLife{% endblock %}

{% block content %}
<h1 class="text-4xl font-bold mb-8 text-center text-green-700">Our Products</h1>

<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6">

  {% for p in products %}
    <div class="bg-white rounded-3xl shadow-lg overflow-hidden hover:shadow-2xl transition duration-300">
      
      <!-- Product Image -->
      <div class="w-full h-48 md:h-40 lg:h-48 overflow-hidden">
        <img src="{{ p.image.url }}" alt="{{ p.title }}" class="w-full h-full object-contain">
      </div>

      <div class="p-4 flex flex-col justify-between h-52">

        <!-- Title -->
        <h3 class="text-lg font-semibold text-green-700 mb-1">{{ p.title }}</h3>

        <!-- Description -->
        <p class="text-gray-600 text-sm mb-2">{{ p.description|truncatechars:60 }}</p>

        <!-- Rating -->
<div class="flex items-center mb-2">
  {% for i in "12345" %}
    {% if forloop.counter <= p.rating|default:5 %}
      <!-- Filled star -->
      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-yellow-400 mr-0.5" viewBox="0 0 20 20" fill="currentColor">
        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.955a1 1 0 00.95.69h4.15c.969 0 1.371 1.24.588 1.81l-3.36 2.44a1 1 0 00-.364 1.118l1.287 3.955c.3.921-.755 1.688-1.54 1.118l-3.36-2.44a1 1 0 00-1.175 0l-3.36 2.44c-.784.57-1.838-.197-1.539-1.118l1.286-3.955a1 1 0 00-.364-1.118L2.975 9.382c-.784-.57-.38-1.81.588-1.81h4.15a1 1 0 00.95-.69l1.286-3.955z" />
      </svg>
    {% else %}
      <!-- Empty star -->
      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-300 mr-0.5" viewBox="0 0 20 20" fill="currentColor">
        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.955a1 1 0 00.95.69h4.15c.969 0 1.371 1.24.588 1.81l-3.36 2.44a1 1 0 00-.364 1.118l1.287 3.955c.3.921-.755 1.688-1.54 1.118l-3.36-2.44a1 1 0 00-1.175 0l-3.36 2.44c-.784.57-1.838-.197-1.539-1.118l1.286-3.955a1 1 0 00-.364-1.118L2.975 9.382c-.784-.57-.38-1.81.588-1.81h4.15a1 1 0 00.95-.69l1.286-3.955z" />
      </svg>
    {% endif %}
  {% endfor %}
</div>


        <!-- Price -->
        <div class="flex items-center gap-2 mb-3">
          {% if p.discount_price %}
            <span class="text-gray-400 line-through text-sm">₦{{ p.price }}</span>
            <span class="text-green-700 font-bold">₦{{ p.discount_price }}</span>
          {% else %}
            <span class="text-green-700 font-bold">₦{{ p.price }}</span>
          {% endif %}
        </div>

        <!-- Order Button -->
        <a href="{% url 'order_create' p.id %}" class="flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 text-white px-3 py-2 rounded-xl font-semibold transition duration-300">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13l-1.5 7h13L17 13M7 13H5.4M16 21a1 1 0 100-2 1 1 0 000 2zm-8 0a1 1 0 100-2 1 1 0 000 2z" />
          </svg>
          Order Now
        </a>

      </div>
    </div>
  {% endfor %}

</div>
{% endblock %}
